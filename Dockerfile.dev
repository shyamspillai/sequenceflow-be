FROM node:20-alpine

WORKDIR /usr/src/app

# Install dependencies first
COPY package.json package-lock.json* yarn.lock* pnpm-lock.yaml* ./
RUN npm i --silent || (echo "No lockfile found, continuing" && npm i --silent)

# Copy configs
COPY tsconfig.json ./

# Expose port
EXPOSE 3001

CMD ["npm", "run", "start:dev"] 